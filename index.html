<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ERP Corabastos — ZIP Export</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>
<header>
  <div class="left">
    <button id="btnMenu" class="primary">☰</button>
    <div class="title">ERP Corabastos</div>
  </div>
  <div class="right">
    <div id="headerUser" class="small">Invitado</div>
    <button id="btnLogout" class="primary hidden">Cerrar sesión</button>
  </div>
</header>
<div class="app">
  <aside id="sidebar">
    <button data-sec="dashboard">Dashboard</button>
    <button data-sec="fundaciones">Fundaciones</button>
    <button data-sec="items">Items</button>
    <button data-sec="conductores">Conductores</button>
    <button data-sec="recibos">Pedidos</button>
    <button data-sec="search">Buscar</button>
  </aside>
  <main id="main">
    <section id="dashboard" class="card">
      <h2>Bienvenido</h2>
      <p class="small">Versión ZIP — Prueba.</p>
    </section>

    <section id="fundaciones" class="card hidden">
      <h2>Fundaciones</h2>
      <label>NIT</label><input id="f_nit">
      <label>Nombre</label><input id="f_name">
      <button id="btnFundCreate" class="primary">Crear Fundación</button>
      <h3>Listado</h3>
      <div id="fundList"></div>
    </section>

    <section id="items" class="card hidden">
      <h2>Items</h2>
      <label>Referencia</label><input id="item_ref">
      <label>Nombre</label><input id="item_name">
      <label>Precio</label><input id="item_price" type="number">
      <button id="btnCreateItem" class="primary">Agregar Item</button>
      <h3>Listado</h3>
      <table id="itemsTable"><thead><tr><th>Ref</th><th>Nombre</th><th>Precio</th></tr></thead><tbody></tbody></table>
    </section>

    <section id="conductores" class="card hidden">
      <h2>Conductores</h2>
      <label>Nombre</label><input id="drv_name">
      <label>Documento</label><input id="drv_doc">
      <button id="btnAddDriver" class="primary">Agregar Conductor</button>
      <h3>Conductores</h3>
      <ul id="driversList"></ul>

      <h3>Importar placas (A=placa,B=tipo)</h3>
      <input id="excel_plates" type="file" accept=".xlsx,.xls"><button id="btnImportPlates" class="primary">Importar Placas</button>
      <h3>Placas</h3>
      <ul id="platesList"></ul>
    </section>

    <section id="recibos" class="card hidden">
      <h2>Pedidos</h2>
      <label>NIT Fundación</label><input id="pd_nit">
      <div id="pd_fund_info" class="small"></div>
      <label>Fundación (seleccione)</label><select id="pd_fund"></select>
      <label>Punto de Envío</label><select id="pd_point"></select>
      <label>Conductor</label><select id="pd_driver"></select>
      <label>Placa</label><select id="pd_plate"></select>
      <label>Peaje</label><input id="pd_peaje" type="number" value="0">
      <label>Costo de Transporte</label><input id="pd_trans" type="number" value="0">
      <h3>Agregar Items</h3>
      <label>Item</label><select id="pd_item_sel"></select>
      <label>Embalaje</label><select id="pd_pack_sel"></select>
      <label>Cant. embalaje</label><input id="pd_pack_qty" type="number" value="1">
      <label>Kilos</label><input id="pd_kilos" type="number">
      <button id="pd_add_item" class="primary">Agregar producto</button>
      <ul id="pd_items_list"></ul>
      <div style="margin-top:10px">
        <button id="btnAddPedido" class="primary">Guardar Pedido</button>
        <button id="btnExportPedidoCSV" class="primary">Exportar CSV</button>
        <button id="btnExportPedidoIMG" class="primary">Exportar Imagen</button>
      </div>
      <h3>Historial</h3>
      <ul id="pedidosList"></ul>
    </section>

    <section id="search" class="card hidden">
      <h2>Buscar</h2>
      <input id="globalSearch" placeholder="Buscar...">
      <div id="globalResults"></div>
    </section>
  </main>
</div>

<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script src="js/state.js"></script>
<script src="js/ui.js"></script>
<script src="js/fundaciones.js"></script>
<script src="js/items.js"></script>
<script src="js/conductores.js"></script>
<script src="js/pedidos.js"></script>
<script src="js/sync.js"></script>
<script>
  // basic init
  document.addEventListener('DOMContentLoaded', function(){
    setupSidebarToggle();
    initApp && initApp();
    // attempt load from assets/BASE DE DATOS.xlsx (optional)
    if(window.initFromExcelAssets) initFromExcelAssets();
    if(window.startAutoSync) startAutoSync();
  });
</script>
</body>
</html>
